name: InventoryTransaction
type: classes
summary: |
  InventoryTransaction contains a list of actions that will be performed when passed to Inventory.CommitTransaction.
  
  All methods return the InventoryTransaction instance, allowing method chaining for quick action setup.
  
  Available operations:
  - Give/GivePlayer: Add items to inventory
  - Take/TakePlayer: Remove items from inventory
  - Move/MovePlayers: Transfer items between holders
  - Reserve/ReservePlayer: Lock items for specific purpose
  - Release/ReleasePlayer: Unlock reserved items
  
  IMPORTANT: Transactions are atomic - all operations succeed or all fail.
description:
code_samples: |
  ```lua
  -- Method chaining example
  local transaction = InventoryTransaction.new()
      :GivePlayer(player, "coins", 100)
      :TakePlayer(player, "gems", 5)
      :GivePlayer(player, "sword", 1)
  
  Inventory.CommitTransaction(transaction, function(transactionId, error)
      if error == InventoryError.None then
          print("All operations completed successfully")
      end
  end)
  ```
inherits:
tags:
constructors:
  - name: new
    summary: |
      Creates a new InventoryTransaction instance.
      After creating, add operations using Give, Take, Move, Reserve, or Release methods.
      Then commit using Inventory.CommitTransaction().
    description:
    is_static: true
    code_samples: |
      ```lua
      local transaction = InventoryTransaction.new()
      ```
    tags:
      - ServerOnly
    parameters:
    returns:
      - type: Class.InventoryTransaction
        summary:
properties:
methods:
  - name: Give
    summary: |
      Adds the given quantity of the given item to the holder's inventory.
      Returns the transaction instance for method chaining.
    description:
    is_static: false
    code_samples: |
      ```lua
      local transaction = InventoryTransaction.new()
      transaction:Give(player.user.id, "potion", 3)
      ```
    tags:
      - ServerOnly
    parameters:
      - name: holderId
        type: string
        tags:
        default:
        summary:
      - name: itemId
        type: string
        tags:
        default:
        summary:
      - name: quantity
        type: number
        tags:
        default:
        summary:
    returns:
      - type: Class.InventoryTransaction
        summary:
  - name: GivePlayer
    summary: |
      Adds the given quantity of the given item to the player's inventory.
      Convenience method equivalent to: Give(player.user.id, itemId, quantity)
      Returns the transaction instance for method chaining.
    description:
    is_static: false
    code_samples: |
      ```lua
      local transaction = InventoryTransaction.new()
      transaction:GivePlayer(player, "coins", 100)
      ```
    tags:
      - ServerOnly
    parameters:
      - name: player
        type: Class.Player
        tags:
        default:
        summary:
      - name: itemId
        type: string
        tags:
        default:
        summary:
      - name: quantity
        type: number
        tags:
        default:
        summary:
    returns:
      - type: Class.InventoryTransaction
        summary:
  - name: Move
    summary: |
      Transfers items from one holder to another.
      Removes quantity from fromHolderId and adds to toHolderId.
      Returns the transaction instance for method chaining.
    description:
    is_static: false
    code_samples: |
      ```lua
      local transaction = InventoryTransaction.new()
      transaction:Move(fromPlayer.user.id, toPlayer.user.id, "gold", 50)
      ```
    tags:
      - ServerOnly
    parameters:
      - name: fromHolderId
        type: string
        tags:
        default:
        summary:
      - name: toHolderId
        type: string
        tags:
        default:
        summary:
      - name: itemId
        type: string
        tags:
        default:
        summary:
      - name: quantity
        type: number
        tags:
        default:
        summary:
    returns:
      - type: Class.InventoryTransaction
        summary:
  - name: MovePlayers
    summary: |
      Transfers items from one player to another.
      Convenience method equivalent to: Move(fromPlayer.user.id, toPlayer.user.id, itemId, quantity)
      Returns the transaction instance for method chaining.
    description:
    is_static: false
    code_samples: |
      ```lua
      local transaction = InventoryTransaction.new()
      transaction:MovePlayers(sender, receiver, "gift", 1)
      ```
    tags:
      - ServerOnly
    parameters:
      - name: fromPlayer
        type: Class.Player
        tags:
        default:
        summary:
      - name: toPlayer
        type: Class.Player
        tags:
        default:
        summary:
      - name: itemId
        type: string
        tags:
        default:
        summary:
      - name: quantity
        type: number
        tags:
        default:
        summary:
    returns:
      - type: Class.InventoryTransaction
        summary:
  - name: Release
    summary: |
      Releases previously reserved items, making them available again.
      The reservedFor parameter must match the one used in Reserve.
      Returns the transaction instance for method chaining.
    description:
    is_static: false
    code_samples: |
      ```lua
      local transaction = InventoryTransaction.new()
      transaction:Release(player.user.id, "weapon", "equipped", 1)
      ```
    tags:
      - ServerOnly
    parameters:
      - name: holderId
        type: string
        tags:
        default:
        summary:
      - name: itemId
        type: string
        tags:
        default:
        summary:
      - name: reservedFor
        type: string
        tags:
        default:
        summary:
      - name: quantity
        type: number
        tags:
        default:
        summary:
    returns:
      - type: Class.InventoryTransaction
        summary:
  - name: ReleasePlayer
    summary: |
      Releases previously reserved items for a player.
      Convenience method equivalent to: Release(player.user.id, itemId, reservedFor, quantity)
      Returns the transaction instance for method chaining.
    description:
    is_static: false
    code_samples: |
      ```lua
      local transaction = InventoryTransaction.new()
      transaction:ReleasePlayer(player, "armor", "equipped", 1)
      ```
    tags:
      - ServerOnly
    parameters:
      - name: player
        type: Class.Player
        tags:
        default:
        summary:
      - name: itemId
        type: string
        tags:
        default:
        summary:
      - name: reservedFor
        type: string
        tags:
        default:
        summary:
      - name: quantity
        type: number
        tags:
        default:
        summary:
    returns:
      - type: Class.InventoryTransaction
        summary:
  - name: Reserve
    summary: |
      Reserves items for a specific purpose, preventing them from being modified by other operations.
      Reserved items cannot be given, taken, or moved until released.
      Use the reservedFor parameter to identify the reservation purpose.
      Returns the transaction instance for method chaining.
    description:
    is_static: false
    code_samples: |
      ```lua
      local transaction = InventoryTransaction.new()
      transaction:Reserve(player.user.id, "weapon", "equipped", 1)
      ```
    tags:
      - ServerOnly
    parameters:
      - name: holderId
        type: string
        tags:
        default:
        summary:
      - name: itemId
        type: string
        tags:
        default:
        summary:
      - name: reservedFor
        type: string
        tags:
        default:
        summary:
      - name: quantity
        type: number
        tags:
        default:
        summary:
    returns:
      - type: Class.InventoryTransaction
        summary:
  - name: ReservePlayer
    summary: |
      Reserves items for a specific purpose for a player.
      Convenience method equivalent to: Reserve(player.user.id, itemId, reservedFor, quantity)
      Returns the transaction instance for method chaining.
    description:
    is_static: false
    code_samples: |
      ```lua
      local transaction = InventoryTransaction.new()
      transaction:ReservePlayer(player, "armor", "equipped", 1)
      ```
    tags:
      - ServerOnly
    parameters:
      - name: player
        type: Class.Player
        tags:
        default:
        summary:
      - name: itemId
        type: string
        tags:
        default:
        summary:
      - name: reservedFor
        type: string
        tags:
        default:
        summary:
      - name: quantity
        type: number
        tags:
        default:
        summary:
    returns:
      - type: Class.InventoryTransaction
        summary:
  - name: Take
    summary: |
      Removes the given quantity of the given item from the holder's inventory.
      Returns the transaction instance for method chaining.
    description:
    is_static: false
    code_samples: |
      ```lua
      local transaction = InventoryTransaction.new()
      transaction:Take(player.user.id, "health_potion", 1)
      ```
    tags:
      - ServerOnly
    parameters:
      - name: holderId
        type: string
        tags:
        default:
        summary:
      - name: itemId
        type: string
        tags:
        default:
        summary:
      - name: quantity
        type: number
        tags:
        default:
        summary:
    returns:
      - type: Class.InventoryTransaction
        summary:
  - name: TakePlayer
    summary: |
      Removes the given quantity of the given item from the player's inventory.
      Convenience method equivalent to: Take(player.user.id, itemId, quantity)
      Returns the transaction instance for method chaining.
    description:
    is_static: false
    code_samples: |
      ```lua
      local transaction = InventoryTransaction.new()
      transaction:TakePlayer(player, "gems", 10)
      ```
    tags:
      - ServerOnly
    parameters:
      - name: player
        type: Class.Player
        tags:
        default:
        summary:
      - name: itemId
        type: string
        tags:
        default:
        summary:
      - name: quantity
        type: number
        tags:
        default:
        summary:
    returns:
      - type: Class.InventoryTransaction
        summary:
math_operations:
